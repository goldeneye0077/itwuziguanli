server {
  listen 80;
  server_name _;
  absolute_redirect off;

  root /usr/share/nginx/html;
  index index.html;

  location = /healthz {
    access_log off;
    add_header Content-Type text/plain;
    return 200 "ok\n";
  }

  # Vite production build outputs static files under `/assets/`.
  # At the same time, the app has an SPA route `/assets` ("我的资产").
  # Without this, Nginx treats `/assets` as a directory and redirects to `/assets/`,
  # which then returns 403 (no index, directory listing disabled).
  location = /assets {
    try_files /index.html =404;
  }

  location = /assets/ {
    return 301 /assets;
  }

  location / {
    try_files $uri /index.html;
  }
}
